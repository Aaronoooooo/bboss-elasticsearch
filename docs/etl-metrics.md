# 数据采集&流批一体化处理使用指南

bboss-datatran由 [bboss ](https://www.bbossgroups.com)开源的[数据采集同步ETL工具](db-es-tool.md)，提供数据采集、数据清洗转换处理和数据入库以及数据指标统计计算流批一体化处理功能。本文介绍数据采集&流批一体化处理使用指南。	

# 1.流批一体化作业类型

通过不boss可以灵活定制具备各种功能的数据采集统计作业

1) 只采集和处理数据作业

2) 采集和处理数据、指标统计计算混合作业

3) 采集数据只做指标统计计算作业

4）在应用中单独集成和使用指标统计功能

# 2.指标计算特点

1) 支持时间维度和非时间维度指标计算

2) 时间维度指标计算：支持指定统计滑动时间窗口

3) 一个指标支持多个维度和多个度量字段计算，多个维度字段值构造成指标的唯一指标key，支持有限基数key和无限基数key指标计算   

4) 一个作业可以支持多种类型的指标，每种类型指标支持多个指标计算

# 3.关键对象和参数

**ImportBuidler** -- 采集作业配置，如果是数据采集和指标计算一体化的作业，则通过ImportBuilder配置ETLMetrics和数据采集输入/输出插件

**MetricsOutputConfig** -- 指标插件配置，提供指标计算规则配置：ETLMetrics、时间维度字段配置等，可以添加多个ETLMetrics

**ETLMetrics** -- 指标计算器，用于指标统计计算逻辑、指标维度字段、指标时间维度字段、指标key生成规则、指标对象构建器、指标数据校验、指标计算结果持久化、设置时间窗口大小、时间窗口类型、指标存储内存区S0、S1交换区大小

**TimeMetric**  -- 指标对象，封装指标维度字段信息、指标计算逻辑

**KeyMetricBuilder**  -- 指标对象构建器，用于构建指标对象，同时提供数据校验逻辑，校验符合条件的数据才会提交给指标对象进行计算

**MetricBuilder** -- 用户构建指标key和KeyMetricBuilder ，ETLMetrics中可以添加多个MetricBuilder 用户统计多个指标



